var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,b){a!=Array.prototype&&a!=Object.prototype&&(a[d]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,d,b,e){if(d){b=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var g=a[e];g in b||(b[g]={});b=b[g]}a=a[a.length-1];e=b[a];d=d(e);d!=e&&null!=d&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var d=this;d instanceof String&&(d=String(d));var g=d.length;b=b||0;for(0>b&&(b=Math.max(b+g,0));b<g;b++){var l=d[b];if(l===a||Object.is(l,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,d,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
$jscomp.findInternal=function(a,d,b){a instanceof String&&(a=String(a));for(var e=a.length,g=0;g<e;g++){var l=a[g];if(d.call(b,l,g,a))return{i:g,v:l}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");function csrfSafeMethod(a){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(a)}
$.ajaxSetup({beforeSend:function(a,d){csrfSafeMethod(d.type)||this.crossDomain||(d=getCookie("csrftoken"),a.setRequestHeader("X-CSRFToken",d))}});
(function(a,d,b,e){a.fn.MarkdownEditor=function(){var b=function(a,b){var c=a.value;a=b;-1<c.indexOf("\r\n")&&(b=c.replace(/\r\n/g,"\n").slice(0,b).match(/\n/g),a+=b?b.length:0);return a},d={bold:{start:"**",end:"**",placeholder:"Your bold text"},italic:{start:"*",end:"*",placeholder:"Your emphasized text"},link:{start:"[",end:"](N)",placeholder:"Add your link title"},head:{start:"#",end:"",placeholder:"Your header"},image:{start:"![",end:"](N)",placeholder:"Add image description"},pre:{start:"",
end:"",placeholder:"\n    Add your code block here\n"},code:{start:"`",end:"`",placeholder:"Add inline code here"},ul:{start:"* ",end:"",placeholder:"List Item"},ol:{start:"1. ",end:"",placeholder:"List Item"}};return this.each(function(){var c=this,e=a('<div class="controls" id="'+c.id+'-controls" />');a(c).before(e.append('<div class="btn-toolbar" role="toolbar" aria-label="Markdown Toolbar"><div class="btn-group mr-2 mb-1" role="group" aria-label="Formatting"><button type="button" data-toggle="tooltip" data-placement="bottom" title="Bold" class="btn btn-light c-bold"><i class="fas fa-bold"></i></button><button type="button" data-toggle="tooltip" data-placement="bottom" title="Italic" class="btn btn-light c-italic"><i class="fas fa-italic"></i></button><button type="button" data-toggle="tooltip" data-placement="bottom" title="Heading" class="btn btn-light c-head"><i class="fas fa-heading"></i></button><button type="button" data-toggle="tooltip" data-placement="bottom" title="Code" class="btn btn-light c-code"><i class="fas fa-code"></i></button></div><div class="btn-group mr-2 mb-1" role="group" aria-label="Utilities"><button type="button" data-toggle="tooltip" data-placement="bottom" title="Link" class="btn btn-light c-link"><i class="fas fa-link"></i></button><button type="button" data-toggle="tooltip" data-placement="bottom" title="Image" class="btn btn-light c-image"><i class="fas fa-image"></i></button></div><div class="btn-group mr-2 mb-1" role="group" aria-label="Lists"><button type="button" data-toggle="tooltip" data-placement="bottom" title="Bullet List" class="btn btn-light c-ul"><i class="fas fa-list-ul"></i></button><button type="button" data-toggle="tooltip" data-placement="bottom" title="Ordered List" class="btn btn-light c-ol"><i class="fas fa-list-ol"></i></button></div><div class="btn-group mr-2 mb-1" role="group" aria-label="Preview"><button type="button" data-toggle="tooltip" data-placement="bottom" title="Preview" class="btn btn-light c-preview"><i class="fas fa-eye"></i></button></div></div><div class="preview"></div>'));
a(c).on("keypress",function(a){return MarkdownHelper(c,a)});a("button",e).on("click",function(h){h.preventDefault();c.focus();var f=this.className.substr(16),k=c.selectionStart;h=c.selectionEnd;if("preview"===f)return createPreview(c,e);if(["head","ul","ol"].includes(f)){k=c.value.lastIndexOf("\n",k)+1;var g=c.value.indexOf("\n",h)-1;h=-2===g?h:g}g=c.value.substring(k,h);var m=a.trim(c.value.charAt(k-1)+c.value.charAt(h));f="code"===f&&(-1!==g.indexOf("\n")||!m||1>c.value.length)?"pre":f;m=a.extend({},
d[f]);var l=a.trim(m.placeholder),n=m.placeholder.indexOf(l);if(g===l)return!0;if(-1!==a.inArray(f,["link","image"])){var p=prompt("image"!==f?"Enter the URL":"Enter image URL","http://");if(p)m.end=m.end.replace("N",p);else return!0}k===h?(c.value=c.value.substring(0,k)+m.start+m.placeholder+m.end+c.value.substring(h),f=k+m.start.length+n,h=h+m.start.length+n+l.length,c.focus(),c.setSelectionRange?c.setSelectionRange(b(c,f),b(c,h)):c.createTextRange&&(k=c.createTextRange(),k.collapse(!0),k.moveEnd("character",
h),k.moveStart("character",f),k.select())):"pre"===f?(k=c.value.lastIndexOf("\n",c.selectionStart),f=c.selectionEnd,-1===k&&(k=0),"\n"===c.value.charAt(f-1)&&--f,f=c.value.indexOf("\n",f),-1===f&&(f=c.value.length),h="\n"+c.value.substring(k,f)+"\n\n",k=c.value.substring(0,k),k+=h.replace(/^(?=.+)/mg,Array(5).join(" ")),k+=c.value.substring(f),c.value=k):c.value=c.value.substring(0,k)+m.start+g+m.end+c.value.substring(h);return!0})})}})(jQuery,window,document);
function createPreview(a,d){$.post("/api/md_preview/",{md:a.value},function(a,e,g){d.find(".preview").html(a).slideDown()});return!0}
function MarkdownHelper(a,d){if(13===d.keyCode){var b=!1;d=a.value.replace(/\r\n/g,"\n");if(a.selectionStart)var e=a.selectionStart;else a.focus(),e=document.selection.createRange(),e.moveStart("character",-d.length),e=e.text.replace(/\r\n/g,"\n").length;var g=d.split("\n");var l=d.substr(0,e).split("\n").length;var c=g[l-1].replace(/^\s+/,"");var n=c.substr(0,2);if(/^[0-9]+[.] (.*)$/.test(c)){var h=c.substr(0,c.indexOf(". "));var f=h+". ";h=parseInt(h,10)+1+". ";b=!0}c&&!b&&"    "===g[l-1].substr(0,
4)&&(f=h="    ",b=!0);0<=["* ","+ ","- "].indexOf(n)&&(f=h=n,b=!0);if(b)return b=g[l-1].indexOf(f),c.replace(/^\s+/,"")===f?(a.value=d.substr(0,e-1-b-h.length)+"\n\n"+d.substr(e,d.length),f=e+1-h.length-b):(a.value=d.substr(0,e)+"\n"+Array(b+1).join(" ")+h+d.substr(e,d.length),f=e+1+h.length+b),a.selectionStart?a.setSelectionRange(f,f):(e=a.createTextRange(),e.move("character",f),e.select()),!1}}
function getCookie(a){var d=null;if(document.cookie&&""!==document.cookie)for(var b=document.cookie.split(";"),e=0;e<b.length;e++){var g=b[e].trim();if(g.substring(0,a.length+1)===a+"="){d=decodeURIComponent(g.substring(a.length+1));break}}return d};
